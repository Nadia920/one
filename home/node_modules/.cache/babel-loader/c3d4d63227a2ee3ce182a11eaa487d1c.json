{"remainingRequest":"D:\\документы\\GitHub\\one\\home\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!D:\\документы\\GitHub\\one\\home\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\документы\\GitHub\\one\\home\\src\\store\\auth.module.js","dependencies":[{"path":"D:\\документы\\GitHub\\one\\home\\src\\store\\auth.module.js","mtime":1626212836000},{"path":"D:\\документы\\GitHub\\one\\home\\babel.config.js","mtime":1626212836000},{"path":"D:\\документы\\GitHub\\one\\home\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680503952892},{"path":"D:\\документы\\GitHub\\one\\home\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1680504144232},{"path":"D:\\документы\\GitHub\\one\\home\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1680507980437}],"contextDependencies":[],"result":["import _defineProperty from \"D:/\\u0434\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/GitHub/one/home/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nvar _actions, _mutations;\nimport \"core-js/modules/es.object.to-string.js\";\nimport ApiService from \"@/common/api.service\";\nimport JwtService from \"@/common/jwt.service\";\nimport { LOGIN, LOGOUT, REGISTER, CHECK_AUTH, UPDATE_USER } from \"./actions.type\";\nimport { SET_AUTH, PURGE_AUTH, SET_ERROR } from \"./mutations.type\";\nvar state = {\n  errors: null,\n  user: {},\n  isAuthenticated: !!JwtService.getToken()\n};\nvar getters = {\n  currentUser: function currentUser(state) {\n    return state.user;\n  },\n  isAuthenticated: function isAuthenticated(state) {\n    return state.isAuthenticated;\n  }\n};\nvar actions = (_actions = {}, _defineProperty(_actions, LOGIN, function (context, credentials) {\n  return new Promise(function (resolve) {\n    ApiService.post(\"users/login\", {\n      user: credentials\n    }).then(function (_ref) {\n      var data = _ref.data;\n      context.commit(SET_AUTH, data.user);\n      resolve(data);\n    }).catch(function (_ref2) {\n      var response = _ref2.response;\n      context.commit(SET_ERROR, response.data.errors);\n    });\n  });\n}), _defineProperty(_actions, LOGOUT, function (context) {\n  context.commit(PURGE_AUTH);\n}), _defineProperty(_actions, REGISTER, function (context, credentials) {\n  return new Promise(function (resolve, reject) {\n    ApiService.post(\"users\", {\n      user: credentials\n    }).then(function (_ref3) {\n      var data = _ref3.data;\n      context.commit(SET_AUTH, data.user);\n      resolve(data);\n    }).catch(function (_ref4) {\n      var response = _ref4.response;\n      context.commit(SET_ERROR, response.data.errors);\n      reject(response);\n    });\n  });\n}), _defineProperty(_actions, CHECK_AUTH, function (context) {\n  if (JwtService.getToken()) {\n    ApiService.setHeader();\n    ApiService.get(\"user\").then(function (_ref5) {\n      var data = _ref5.data;\n      context.commit(SET_AUTH, data.user);\n    }).catch(function (_ref6) {\n      var response = _ref6.response;\n      context.commit(SET_ERROR, response.data.errors);\n    });\n  } else {\n    context.commit(PURGE_AUTH);\n  }\n}), _defineProperty(_actions, UPDATE_USER, function (context, payload) {\n  var email = payload.email,\n    username = payload.username,\n    password = payload.password,\n    image = payload.image,\n    bio = payload.bio;\n  var user = {\n    email: email,\n    username: username,\n    bio: bio,\n    image: image\n  };\n  if (password) {\n    user.password = password;\n  }\n  return ApiService.put(\"user\", user).then(function (_ref7) {\n    var data = _ref7.data;\n    context.commit(SET_AUTH, data.user);\n    return data;\n  });\n}), _actions);\nvar mutations = (_mutations = {}, _defineProperty(_mutations, SET_ERROR, function (state, error) {\n  state.errors = error;\n}), _defineProperty(_mutations, SET_AUTH, function (state, user) {\n  state.isAuthenticated = true;\n  state.user = user;\n  state.errors = {};\n  JwtService.saveToken(state.user.token);\n}), _defineProperty(_mutations, PURGE_AUTH, function (state) {\n  state.isAuthenticated = false;\n  state.user = {};\n  state.errors = {};\n  JwtService.destroyToken();\n}), _mutations);\nexport default {\n  state: state,\n  actions: actions,\n  mutations: mutations,\n  getters: getters\n};",{"version":3,"names":["ApiService","JwtService","LOGIN","LOGOUT","REGISTER","CHECK_AUTH","UPDATE_USER","SET_AUTH","PURGE_AUTH","SET_ERROR","state","errors","user","isAuthenticated","getToken","getters","currentUser","actions","_actions","_defineProperty","context","credentials","Promise","resolve","post","then","_ref","data","commit","catch","_ref2","response","reject","_ref3","_ref4","setHeader","get","_ref5","_ref6","payload","email","username","password","image","bio","put","_ref7","mutations","_mutations","error","saveToken","token","destroyToken"],"sources":["D:/документы/GitHub/one/home/src/store/auth.module.js"],"sourcesContent":["import ApiService from \"@/common/api.service\";\nimport JwtService from \"@/common/jwt.service\";\nimport {\n  LOGIN,\n  LOGOUT,\n  REGISTER,\n  CHECK_AUTH,\n  UPDATE_USER\n} from \"./actions.type\";\nimport { SET_AUTH, PURGE_AUTH, SET_ERROR } from \"./mutations.type\";\n\nconst state = {\n  errors: null,\n  user: {},\n  isAuthenticated: !!JwtService.getToken()\n};\n\nconst getters = {\n  currentUser(state) {\n    return state.user;\n  },\n  isAuthenticated(state) {\n    return state.isAuthenticated;\n  }\n};\n\nconst actions = {\n  [LOGIN](context, credentials) {\n    return new Promise(resolve => {\n      ApiService.post(\"users/login\", { user: credentials })\n        .then(({ data }) => {\n          context.commit(SET_AUTH, data.user);\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response.data.errors);\n        });\n    });\n  },\n  [LOGOUT](context) {\n    context.commit(PURGE_AUTH);\n  },\n  [REGISTER](context, credentials) {\n    return new Promise((resolve, reject) => {\n      ApiService.post(\"users\", { user: credentials })\n        .then(({ data }) => {\n          context.commit(SET_AUTH, data.user);\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response.data.errors);\n          reject(response);\n        });\n    });\n  },\n  [CHECK_AUTH](context) {\n    if (JwtService.getToken()) {\n      ApiService.setHeader();\n      ApiService.get(\"user\")\n        .then(({ data }) => {\n          context.commit(SET_AUTH, data.user);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response.data.errors);\n        });\n    } else {\n      context.commit(PURGE_AUTH);\n    }\n  },\n  [UPDATE_USER](context, payload) {\n    const { email, username, password, image, bio } = payload;\n    const user = {\n      email,\n      username,\n      bio,\n      image\n    };\n    if (password) {\n      user.password = password;\n    }\n\n    return ApiService.put(\"user\", user).then(({ data }) => {\n      context.commit(SET_AUTH, data.user);\n      return data;\n    });\n  }\n};\n\nconst mutations = {\n  [SET_ERROR](state, error) {\n    state.errors = error;\n  },\n  [SET_AUTH](state, user) {\n    state.isAuthenticated = true;\n    state.user = user;\n    state.errors = {};\n    JwtService.saveToken(state.user.token);\n  },\n  [PURGE_AUTH](state) {\n    state.isAuthenticated = false;\n    state.user = {};\n    state.errors = {};\n    JwtService.destroyToken();\n  }\n};\n\nexport default {\n  state,\n  actions,\n  mutations,\n  getters\n};\n"],"mappings":"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"}]}